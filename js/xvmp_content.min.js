var VimpContent={selected_media:[],ajax_base_url:"",template:"",copy_link_template:"<input type='text' id='xvmp_direct_link_tpl' value='' hidden>",init:function(){addEventListener("xvmp_copy_direct_link",function(){this.copyDirectLink()}),addEventListener("xvmp_copy_direct_link_with_time",function(){this.copyDirectLinkWithTime()})},loadTiles:function(){$(VimpContent.selected_media).each(function(a,b){$.get({url:VimpContent.ajax_base_url,data:{cmd:"renderItem"+VimpContent.template,mid:b}}).always(function(a){"deleted"===a?$("div#box_"+b).hide():($("div#xvmp_tile_"+b).html(a),$("div#xvmp_tile_"+b).removeClass("waiting"))})})},loadTilesInOrder:function(a){var b=VimpContent.selected_media[a];$.get({url:VimpContent.ajax_base_url,data:{cmd:"render"+VimpContent.template,mid:b}}).always(function(c){"deleted"===c?$("div#box_"+b).hide():($("div#xvmp_tile_"+b).html(c),$("div#xvmp_tile_"+b).removeClass("waiting")),"undefined"!=typeof VimpContent.selected_media[a+1]&&VimpContent.loadTilesInOrder(a+1)})},playVideo:function(a){console.log("playVideo "+a);var b=$("#xvmp_modal_player");b.find("h4.modal-title").html(""),b.find("div#xvmp_video_container").html(""),b.modal("show"),$.get({url:this.ajax_base_url,data:{cmd:"fillModalPlayer",mid:a}}).always(function(c){response_object=JSON.parse(c),b.find("div#xvmp_video_container").html(response_object.html),b.find("h4.modal-title").html(response_object.video_title),"undefined"!=typeof VimpObserver&&VimpObserver.init(a,response_object.time_ranges),b.on("hidden",function(){$video=$("video")[0],"undefined"!=typeof $video&&$video.pause(),$iframe=$("iframe"),"undefined"!=typeof $iframe&&$iframe.attr("src","")}),b.on("hidden.bs.modal",function(){$video=$("video")[0],"undefined"!=typeof $video&&$video.pause(),$iframe=$("iframe"),"undefined"!=typeof $iframe&&$iframe.attr("src","")})})},copyDirectLink:function(a){const b=document.createElement("textarea");b.value=a.replace("_TIME_",""),document.body.appendChild(b),b.select(),document.execCommand("copy"),document.body.removeChild(b)},copyDirectLinkWithTime:function(a){const b=document.createElement("textarea");b.value=a.replace("_TIME_","_"+Math.floor(player.currentTime())),document.body.appendChild(b),b.select(),document.execCommand("copy"),document.body.removeChild(b)}};