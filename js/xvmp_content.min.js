var VimpContent={selected_media:[],ajax_base_url:"",template:"",copy_link_template:"<input type='text' id='xvmp_direct_link_tpl' value='' hidden>",init:function(){addEventListener("xvmp_copy_direct_link",function(){this.copyDirectLink()}),addEventListener("xvmp_copy_direct_link_with_time",function(){this.copyDirectLinkWithTime()})},loadTiles:function(){$(VimpContent.selected_media).each(function(a,b){$.get({url:VimpContent.ajax_base_url,data:{cmd:"renderItem",tpl:VimpContent.template,mid:b}}).always(function(a){"deleted"===a?$("div#box_"+b).hide():($("div#xvmp_tile_"+b).html(a),$("div#xvmp_tile_"+b).removeClass("waiting"))})})},loadTilesInOrder:function(a){var b=VimpContent.selected_media[a];$.get({url:VimpContent.ajax_base_url,data:{cmd:"renderItem",tpl:VimpContent.template,mid:b}}).always(function(c){"deleted"===c?$("div#box_"+b).hide():($("div#xvmp_tile_"+b).html(c),$("div#xvmp_tile_"+b).removeClass("waiting")),"undefined"!=typeof VimpContent.selected_media[a+1]&&VimpContent.loadTilesInOrder(a+1)})},playVideo:function(a){console.log("playVideo "+a),$("#xoct_waiter_modal").show();var b=$("#xvmp_modal_player");b.modal("show"),$.get({url:this.ajax_base_url,data:{cmd:"fillModalPlayer",mid:a}}).always(function(c){response_object=JSON.parse(c),b.find("div#xvmp_video_container").html(response_object.html),b.find("h4.modal-title").html(response_object.video_title),$("#xoct_waiter_modal").show(),"undefined"!=typeof VimpObserver&&VimpObserver.init(a,response_object.time_ranges),b.on("hidden",function(){$video=$("video")[0],"undefined"!=typeof $video&&$video.pause(),$iframe=$("iframe"),"undefined"!=typeof $iframe&&$iframe.attr("src","")}),b.on("hidden.bs.modal",function(){$video=$("video")[0],"undefined"!=typeof $video&&$video.pause(),$iframe=$("iframe"),"undefined"!=typeof $iframe&&$iframe.attr("src","")})})},copyDirectLink:function(a){this.copyToClipboard(a)},copyDirectLinkWithTime:function(a){this.copyToClipboard(a.replace("_0.","_"+Math.floor(player.currentTime())+"."))},copyToClipboard:function(a){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(a);else{let b=document.createElement("textarea");return b.value=a,b.style.position="fixed",b.style.left="-999999px",b.style.top="-999999px",document.body.appendChild(b),b.focus(),b.select(),new Promise((a,c)=>{document.execCommand("copy")?a():c(),b.remove()})}}};